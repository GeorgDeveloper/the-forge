<!-- Новый дашборд The Forge -->
<div class="dashboard">
  <!-- Приветствие -->
  <div class="welcome-section">
    @if (account(); as accountRef) {
      <h1 class="welcome-title">Добро пожаловать, {{ accountRef.firstName || accountRef.login }}!</h1>
      <p class="welcome-subtitle">Система управления персоналом и задачами</p>
    } @else {
      <h1 class="welcome-title">The Forge</h1>
      <p class="welcome-subtitle">Система управления персоналом и задачами</p>
    }
  </div>

  @if (account() !== null) {
    <!-- Статистика за сегодня -->
    <div class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon success">
            <fa-icon icon="users"></fa-icon>
          </div>
          <div class="stat-content">
            <div class="stat-number">24</div>
            <div class="stat-label">Активных сотрудников</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon warning">
            <fa-icon icon="tasks"></fa-icon>
          </div>
          <div class="stat-content">
            <div class="stat-number">8</div>
            <div class="stat-label">Активных задач</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon info">
            <fa-icon icon="graduation-cap"></fa-icon>
          </div>
          <div class="stat-content">
            <div class="stat-number">3</div>
            <div class="stat-label">Предстоящих инструктажей</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon danger">
            <fa-icon icon="exclamation-triangle"></fa-icon>
          </div>
          <div class="stat-content">
            <div class="stat-number">2</div>
            <div class="stat-label">Требуют внимания</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Виджеты дашборда -->
    <div class="widgets-section">
      <div class="widgets-grid">
        <!-- Ближайшие инструктажи -->
        <div class="widget-card">
          <div class="widget-header">
            <h3 class="widget-title">Ближайшие инструктажи</h3>
            <a routerLink="/safety-instruction" class="widget-link">Все инструктажи</a>
          </div>
          <div class="widget-content">
            <div class="instruction-item">
              <div class="instruction-info">
                <div class="instruction-title">Техника безопасности на производстве</div>
                <div class="instruction-date">Завтра, 10:00</div>
              </div>
              <div class="instruction-progress">
                <div class="progress-bar" style="width: 75%"></div>
              </div>
            </div>

            <div class="instruction-item">
              <div class="instruction-info">
                <div class="instruction-title">Работа с электрооборудованием</div>
                <div class="instruction-date">15 января, 14:00</div>
              </div>
              <div class="instruction-progress">
                <div class="progress-bar" style="width: 30%"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Активные задачи -->
        <div class="widget-card">
          <div class="widget-header">
            <h3 class="widget-title">Приоритетные задачи</h3>
            <a routerLink="/task" class="widget-link">Все задачи</a>
          </div>
          <div class="widget-content">
            <div class="task-item high">
              <div class="task-priority"></div>
              <div class="task-info">
                <div class="task-title">Обновление документации по безопасности</div>
                <div class="task-assignee">Назначено: Иванов И.И.</div>
              </div>
              <div class="task-status high">Высокий</div>
            </div>

            <div class="task-item medium">
              <div class="task-priority"></div>
              <div class="task-info">
                <div class="task-title">Проверка средств защиты</div>
                <div class="task-assignee">Назначено: Петров П.П.</div>
              </div>
              <div class="task-status medium">Средний</div>
            </div>
          </div>
        </div>

        <!-- Календарь -->
        <div class="widget-card">
          <div class="widget-header">
            <h3 class="widget-title">Календарь событий</h3>
            <a routerLink="/calendar" class="widget-link">Открыть календарь</a>
          </div>
          <div class="widget-content">
            <div class="mini-calendar">
              <div class="calendar-header">Январь 2024</div>
              <div class="calendar-events">
                <div class="event-item training">
                  <div class="event-date">15</div>
                  <div class="event-title">Инструктаж по ТБ</div>
                </div>
                <div class="event-item task">
                  <div class="event-date">18</div>
                  <div class="event-title">Проверка оборудования</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  } @else {
    <!-- Страница для неавторизованных пользователей -->
    <div class="auth-section">
      <div class="auth-card">
        <h2>Добро пожаловать в The Forge</h2>
        <p>Для доступа к системе управления персоналом необходимо авторизоваться.</p>

        <div class="auth-actions">
          <button class="btn-forge-primary" (click)="login()">Войти в систему</button>
          <a routerLink="/account/register" class="btn-forge-secondary">Создать аккаунт</a>
        </div>

        <div class="demo-accounts">
          <p><strong>Демо-аккаунты:</strong></p>
          <ul>
            <li>Администратор: admin / admin</li>
            <li>Пользователь: user / user</li>
          </ul>
        </div>
      </div>
    </div>
  }
</div>
